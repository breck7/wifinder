<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location and WiFi Speed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .info {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <h1>Current Location and WiFi Speed</h1>
    
    <div class="info">
        <h2>Your Location</h2>
        <p>Latitude: <span id="latitude">Loading...</span></p>
        <p>Longitude: <span id="longitude">Loading...</span></p>
    </div>

    <div class="info">
        <h2>WiFi Speed Test</h2>
        <p>Download Speed: <span id="downloadSpeed">Testing...</span></p>
        <p>Upload Speed: <span id="uploadSpeed">Testing...</span></p>
    </div>

    <script>
        // Geolocation API to get the current location
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            document.getElementById('latitude').textContent = position.coords.latitude;
            document.getElementById('longitude').textContent = position.coords.longitude;
        }

        // Function to calculate download and upload speed
        function speedTest() {
            const downloadUrl = "https://speed.hetzner.de/100MB.bin"; // A sample file to test download speed
            const uploadUrl = "https://postman-echo.com/post"; // A dummy API to test upload speed

            // Test download speed
            const startTimeDownload = new Date().getTime();
            fetch(downloadUrl)
                .then(response => response.blob())
                .then(() => {
                    const endTimeDownload = new Date().getTime();
                    const durationDownload = (endTimeDownload - startTimeDownload) / 1000; // in seconds
                    const fileSizeInMB = 100; // the size of the test file in MB
                    const downloadSpeed = (fileSizeInMB / durationDownload).toFixed(2); // in MB/s
                    document.getElementById('downloadSpeed').textContent = downloadSpeed + ' MB/s';
                })
                .catch(() => {
                    document.getElementById('downloadSpeed').textContent = 'Error';
                });

            // Test upload speed
            const startTimeUpload = new Date().getTime();
            const data = new Blob(["Test Data"], { type: "text/plain" });
            fetch(uploadUrl, {
                method: "POST",
                body: data
            })
                .then(response => response.json())
                .then(() => {
                    const endTimeUpload = new Date().getTime();
                    const durationUpload = (endTimeUpload - startTimeUpload) / 1000; // in seconds
                    const uploadSizeInMB = 0.0001; // an approximation of the upload size
                    const uploadSpeed = (uploadSizeInMB / durationUpload).toFixed(2); // in MB/s
                    document.getElementById('uploadSpeed').textContent = uploadSpeed + ' MB/s';
                })
                .catch(() => {
                    document.getElementById('uploadSpeed').textContent = 'Error';
                });
        }

        // Call the functions on page load
        window.onload = function() {
            getLocation();
            speedTest();
        };
    </script>
</body>
</html>
